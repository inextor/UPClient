<app-header></app-header>
@if (banner_url) {
	<img [src]="banner_url" alt="Banner" class="img-fluid">
}
<div class="product-page-container py-3 bg-white">
	@if(item_info_list.length > 0){
		<header class="page-header">
			<h1>Todos los Productos</h1>
			<div class="sub-header">
				<!--span class="results-count">Mostrando {{item_info_list.length}} resultados</span-->
				<!--div class="sort-options">
					<label for="sort-by">Ordenar por</label>
					<select id="sort-by" name="sort-by">
						<option value="default">Default</option>
					</select>
				</div-->
			</div>
		</header>
		<main class="row py-3">
			@for (item_info of item_info_list; track item_info)
			{
				<div class="col-12 col-sm-6 col-md-3 p-3">
					<a [routerLink]="['/product-detail', item_info.item.id]" class="product-link">
						<article class="product-card h-100">
							<div class="product_image">
								@if (item_info.image_url)
								{
									<img [src]="item_info.image_url" alt="Product Image" class="product_image">
								}
								@else
								{
									<svg class="product_svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
										<!-- Background -->
										<rect class="svg-background" width="100" height="100" [attr.fill]="main_color"/>
										<!-- Icon (Box) -->
										<g class="svg-icon" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" [attr.stroke]="font_color">
											<!-- Main box shape -->
											<path d="M25 45 L25 75 L75 75 L75 45 L50 30 L25 45 Z"/>
											<!-- Top flap -->
											<path d="M25 45 L50 60 L75 45"/>
											<!-- Vertical line on front -->
											<line x1="50" y1="75" x2="50" y2="60"/>
										</g>
									</svg>
								}
							</div>
							<h2 class="product-title text-center">{{item_info.item.name}}</h2>

							<p class="product-price text-center">{{(item_info?.price?.price || '' )| currency}}</p>
						</article>
					</a>
				</div>
			}
		</main>

		<div class="pagination">
			<button [disabled]="current_page === 1" (click)="previousPage()">Anterior</button>
			@for (page of page_numbers; track page)
			{
				@if (page !== -1)
				{
					<button [class.active]="page === current_page" (click)="goToPage(page)">
						{{ page }}
					</button>
				}
				@else
				{

				}
			}
			<button [disabled]="current_page === total_pages" (click)="nextPage()">Siguiente</button>
		</div>
	} @else if(ecommerce_user.type === 'ECOMMERCE_ADMIN') {
		<header class="page-header">
			<h1>Perfiles</h1>
		</header>
		<main class="row py-3">
			@for (profile of profiles; track profile)
			{
				<div class="col-12 col-sm-6 col-md-3 p-3">
					<a (click)="onSelectProfile(profile)" class="product-link">
						<article class="product-card h-100">
							<div class="product_image">
								<svg class="product_svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
									<!-- Background -->
									<rect class="svg-background" width="100" height="100" [attr.fill]="main_color"/>
									<!-- Icon (User) -->
									<g class="svg-icon" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" [attr.stroke]="font_color">
										<path d="M50 45C56.6274 45 62 39.6274 62 33C62 26.3726 56.6274 21 50 21C43.3726 21 38 26.3726 38 33C38 39.6274 43.3726 45 50 45Z" />
										<path d="M30 79C30 68.402 38.9543 60 50 60C61.0457 60 70 68.402 70 79" />
									</g>
								</svg>
							</div>
							<h2 class="product-title text-center">{{profile.name}}</h2>
						</article>
					</a>
				</div>
			}
		</main>
	}
</div>